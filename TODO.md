# TODO для Maloy

## Задачи на завтра (25 октября 2025)

### 1. Улучшить работу с английскими названиями
- [ ] Запретить GPT переводить английские слова на русский
- [ ] Улучшить распознавание английских названий (Whisper)
- [ ] Поиск должен работать с английскими названиями
- [ ] Обновить system prompt: передавать названия артистов/песен В ТОЧНОСТИ как услышал

### 2. Умный поиск с вариантами написания
- [ ] При поиске артиста типа "Xzibit" перебирать созвучные варианты:
  - Xzibit
  - X-zibit
  - Exhibit
  - Xzbit
- [ ] Не говорить сразу "не нашел", а попробовать альтернативные написания
- [ ] Приоритет: сначала искать по артисту, потом по названию песни

### 3. Автоматический плейлист
- [ ] После включения песни создавать очередь из 10 песен этого же артиста
- [ ] Сортировка по популярности (popularity в MusicKit API)
- [ ] `player.queue = [песня1, песня2, ..., песня10]`

### 4. UI для незрячего пользователя
- [ ] Убрать все текущие кнопки
- [ ] Создать ДВЕ БОЛЬШИЕ кнопки на весь экран:

  **Верхняя половина экрана:**
  - Действие: следующая песня
  - Звук при нажатии: "бип" (высокий тон)

  **Нижняя половина экрана:**
  - Действие: остановить песню/речь + перейти в режим "Слушаю"
  - Звук при нажатии: "буп" (низкий тон)

- [ ] Отладочные надписи оставить МЕЛКИМ шрифтом внутри кнопок (не мешают тапу)
- [ ] Кнопки должны работать в любом режиме (когда играет музыка, когда говорит, когда слушает)

## Технические детали

### Звуки для кнопок
Использовать `AudioServicesPlaySystemSound()`:
- Верхняя кнопка (next): `SystemSoundID = 1057` (Tock.aiff)
- Нижняя кнопка (stop): `SystemSoundID = 1256` (Tink.aiff)

### MusicKit API для плейлиста
```swift
// Поиск топ-10 песен артиста по популярности
var request = MusicCatalogSearchRequest(term: artistName, types: [Song.self])
request.limit = 10
let response = try await request.response()
let songs = response.songs.sorted { $0.popularity ?? 0 > $1.popularity ?? 0 }
player.queue = Array(songs)
```

### System Prompt обновления
Добавить в промпт:
```
КРИТИЧЕСКИ ВАЖНО ДЛЯ МУЗЫКИ:
- Когда слышишь английское название артиста/песни - передавай его В ТОЧНОСТИ как услышал
- НЕ переводи на русский: "Coldplay" → "Coldplay" ✅, НЕ "Колдплей" ❌
- НЕ транслитерируй: "The Weeknd" → "The Weeknd" ✅, НЕ "Зе Уикенд" ❌
- Просто копируй то что услышал в music_search_and_play()
```

## Приоритет выполнения
1. UI с двумя кнопками (самое важное для незрячего)
2. Плейлист из 10 песен
3. Умный поиск с вариантами
4. Запрет перевода английских названий
